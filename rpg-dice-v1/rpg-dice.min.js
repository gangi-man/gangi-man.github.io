function make_rpg_dice_counter(){function e(e){for(;e;){if("BLOCKQUOTE"==e.tagName)return e
e=e.nextElementSibling}return null}function n(e,n,r){var t=null,c=[]
if(n.innerHTML.split(/<br>/i).forEach(function(e,n,r){e.match(/<font\s+color="#ff0000"\s*>/i)&&(t=e,e=e.replace(/<font/i,'<span class="faces"><font'),e=e.replace(/<\/font>/i,"</font></span>")),c.push(e)}),t){n.innerHTML=c.join("<br>")
var o=RegExp(/dice(\d+)d(\d+)([-+]\d+)?=/i),a=o.exec(t)
if(!a)return null
var i=a[1],l=a[2],u=0,f=""
a[3]&&(u=Number(a[3]),u<0&&(f=""+u),u>0&&(f="+"+u))
var s="dice"+i+"d"+l+f,d=/<font\s+color="#ff0000">\s*((\d+\s+)+)\((\d+)\)<\/font>/.exec(t)
if(!d)return console.log("---------something wrong ---"+e+"\n"+t),null
var _=Number(d[3]),m=d[1].replace(/\s+$/,"").split(/\s+/)
return m.forEach(function(e,n,r){r[n]=Number(e)}),{dnum:i,dmax:l,dadd:u,kind:s,id:Number(e),input:r,bloq:n,faces:m,sum:_}}}function r(){var r=document.getElementsByTagName("input")
u=[]
for(var c=0;c<r.length;c++){var o=/delcheck(\d+)/.exec(r[c].getAttribute("id"))
if(o){var a=e(r[c])
if(a){var i=n(o[1],a,r[c]),l=t(a)
!_rule&&l&&(_rule=l),i&&u.push(i)}}}}function t(e){function n(e,n,t){var c=" ";/;$/.exec(e)&&(c="<br>"),e=e.replace(/[;,]$/,"")
var o=/#(\d+)/,a=o.exec(e),i=Number(a[1]),l=/\d+:[^\s]*/g,u=e.match(l),f={}
if(u)for(var n=0;n<u.length;n++){var s=u[n].split(":")
f[Number(s[0])]=s[1]}e=e.replace(o,""),e=e.replace(l,""),e=e.replace(/^\s*/,"")
var d={face_rule:null}
d.name=e.replace(/\s*$/,""),d.delimiter=c,Object.keys(f).length>0&&(d.face_rule=f),r[i]=d}var r={},t=0
return e.innerHTML.split(/<br>/).forEach(function(e,r,c){if(!e.match(/<font/)){var o=RegExp(/#\d+\s*[^;,]*[;,]/g)
o.exec(e)&&(t++,e.match(o).forEach(n))}}),t>0?r:null}function c(e,n){function r(e,n){var r=""
if(e.face_rule){var t=null,c=Number.MAX_VALUE
Object.keys(e.face_rule).forEach(function(e,r,o){var a=Number(e)
n<=a&&a-n<=c&&(c=a-n,t=a)}),r+=e.name+":",r+=t?e.face_rule[t]:n}else r+=e.name+":"+n
return r="<font color='#841a75' size='-1'>"+r+"</font>",r+=e.delimiter}for(var t="",c=0;c<n.faces.length;c++){var o={name:"d"+(c+1),delimiter:" "}
String(c+1)in e&&(o=e[String(c+1)]),t+=r(o,n.faces[c])}return t}function o(e){var n=c(_rule,e)
e.bloq.innerHTML+="<br>"+n}function a(){var e=function(e){return document.getElementById(e)},n=e("ftbl"),r=e("ufm")
"absolute"==n.style.position&&(n.style.top=r.offsetTop+"px")}function i(e){r(),u.forEach(function(e,n,r){o(e)}),a()}var l="1.0",u=null
_rule=null
return console.log("start rpg-dice ver"+l+" ..."),i}"undefined"==typeof __rpg_dice_counter__&&(__rpg_dice_counter__=make_rpg_dice_counter(),__rpg_dice_counter__(),console.log("done.")),console.log("HELLO RPG")
