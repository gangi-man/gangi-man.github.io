function make_dice_counter(){function n(n){for(;n;){if("BLOCKQUOTE"==n.tagName)return n
n=n.nextElementSibling}return null}function o(n,o,e){var t=null,r=[]
if(o.innerHTML.split(/<br>/i).forEach(function(n,o,e){n.match(/<font\s+color="#ff0000"\s*>/i)&&(t=n,n=n.replace(/<font/i,'<span class="faces"><font'),n=n.replace(/<\/font>/i,"</font></span>")),r.push(n)}),t){o.innerHTML=r.join("<br>")
var i=RegExp(/dice(\d+)d(\d+)([-+]\d+)?=/i),c=i.exec(t)
if(!c)return null
var f=c[1],a=c[2],l=0,s=""
c[3]&&(l=Number(c[3]),l<0&&(s=""+l),l>0&&(s="+"+l))
var u="dice"+f+"d"+a+s,d=/<font\s+color="#ff0000">\s*((\d+\s+)+)\((\d+)\)<\/font>/.exec(t)
if(!d)return console.log("---------something wrong ---"+n+"\n"+t),null
var N=Number(d[3]),g=d[1].replace(/\s+$/,"").split(/\s+/)
return g.forEach(function(n,o,e){e[o]=Number(n)}),{dnum:f,dmax:a,dadd:l,kind:u,id:Number(n),input:e,bloq:o,faces:g,sum:N}}}function e(){var e=document.getElementsByTagName("input")
c=[]
for(var r=0;r<e.length;r++){var i=/delcheck(\d+)/.exec(e[r].getAttribute("id"))
if(i){var f=n(e[r])
if(f){var a=o(i[1],f,e[r])
a&&c.push(a)}}}c.forEach(function(n,o,e){t(n)})}function t(n){function o(n){var o=0
return n.forEach(function(e,t,r){n[t]==i[t]&&o++}),n.length>=4&&"GA"==n[0]&&"NN"==n[1]&&"GA"==n[2]&&"NN"==n[3]&&(o+=4),n.length>=7&&"GI"==n[4]&&"GI"==n[5]&&"NN"==n[6]&&(o+=3),n.length>=12&&"GI"==n[7]&&"NN"==n[8]&&"GA"==n[9]&&"MA"==n[10]&&"NN"==n[11]&&(o+=5),o}function e(n){var o=""
return n.forEach(function(e,t,c){o+=n[t]==i[t]?'<font color="#191970">'+r[n[t]]+"</font> ":'<font color="#4682b4">'+r[n[t]]+"</font> "}),o}if(!n.ginga_html){for(var t=["GA","NN","GI","MA","**"],r={GA:"&#12460;",NN:"&#12531;",GI:"&#12462;",MA:"&#12510;","**":"&#65290;"},i=["GA","NN","GA","NN","GI","GI","NN","GI","NN","GA","MA","NN"],c=0,f=[],a=[],l={},s=n.sum;s>0;)f=[s%10].concat(f),s=Math.floor(s/10)
f=n.faces.concat(f),f.forEach(function(n,o,e){n in l||(l[n]=t[c],c<4&&c++),a.push(l[n])}),n.ginga_html=e(a),n.ginga_score=o(a)}}function r(n){var o=""
n.bloq.innerHTML.split(/<br>/i).forEach(function(e,t,r){o+=e,e.match(/<font\s+color/i)&&e.match(/"#ff0000"/i)&&(o+='<span class="ginga_descr">',o+='<br><span style="visibility:hidden;">'+n.kind+"=</span>",o+='<span class="faces">'+n.ginga_html+"</span>",o+=' <font color="#4b0082">(GP:'+n.ginga_score+")</font></span>"),o+="<br>"}),n.bloq.innerHTML=o
var e=n.bloq.getElementsByClassName("faces")
if(!f){var t=Math.floor(100*e[0].offsetWidth/e[1].offsetWidth)
f=t+"%"}e[1].style.fontSize=f}function i(n){e(),c.forEach(function(n,o,e){r(n)})}var c=null,f=null
return i}"undefined"==typeof __dice_counter__&&(console.log("start gingalize..."),__dice_counter__=make_dice_counter(),__dice_counter__(),console.log("done."))
